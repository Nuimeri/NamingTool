# Gemini Code Assistant 開発引き継ぎドキュメント

## 1\. プロジェクト概要

このプロジェクトは、Google Apps Script (GAS) を用いて開発される「**AIネーミングアシスタント**」Webアプリケーションです。ユーザーが入力したキーワードに基づき、Googleの生成AIである **Gemini API** を利用して多様なネーミング案を生成・表示します。

**開発の目的:**

  * **GAS と Gemini API** を用いたサーバーレス Web アプリケーションの開発体験
  * **生成AI（AIエージェントを含む）と TDD（テスト駆動開発）** を組み合わせた開発プロセスの実践と、その知見をチュートリアル記事としてまとめること

## 2\. プロジェクトの現状

現在のプロジェクト構成は以下の通りです。

```
D:.
├─documents
│     引継ぎ資料.md
│     仕様書.md
│     基本設計.md
│     詳細設計.md
│
└─src
    ├─main
    └─test
```

`./documents` ディレクトリには、プロダクトの仕様、基本的な構成、および詳細な設計に関するドキュメントが含まれています。

## 3\. 今後の開発タスク

このプロジェクトでは、**TDD（テスト駆動開発）** のアプローチを全面的に採用します。以下のステップを順番に進めてください。

**重要:** 各開発ステップの完了後には、**Gitコミットとキャプチャ（スクリーンショット）** を取得する必要があります。そのため、**各ステップの作業が完了したら、次の指示を待つために一度作業を停止し、その旨を報告してください。**

### 3.1. GAS プロジェクトのディレクトリ構造変更

現状の `./src/main` と `./src/test` ディレクトリは一般的なWeb開発では有効ですが、GASプロジェクトの性質（単一のGASプロジェクト内に複数のスクリプトファイルとHTMLファイルが存在する）を考慮すると、より適した構造があります。

**提案するディレクトリ構造:**

```
D:.
├─documents
│     引継ぎ資料.md
│     仕様書.md
│     基本設計.md
│     詳細設計.md
│
└─src
    ├─appsscript.json  // GASプロジェクトのマニフェストファイル
    ├─Code.gs          // サーバーサイドエントリポイント
    ├─NamingService.gs // ネーミング生成ロジック
    ├─GeminiApi.gs     // Gemini API連携
    ├─Utils.gs         // 共通ユーティリティ
    ├─index.html       // フロントエンドHTML/JS/CSS
    └─tests            // テストスクリプト用ディレクトリ
        ├─NamingService_Test.gs
        ├─GeminiApi_Test.gs
        └─Utils_Test.gs
```

**変更理由:**

  * **GASの構造に合致:** GASプロジェクトは通常、フラットなファイル構造で、すべての `.gs` ファイルが同じ実行環境にデプロイされます。`appsscript.json` もプロジェクトルートに配置されます。
  * **テストの分離:** `tests` ディレクトリを作成することで、本体コードとテストコードを論理的に分離し、GASエディタ上でも見やすく管理できます。
  * **GASプロジェクトのインポート/エクスポートの容易さ:** この構造は、GASプロジェクトをローカルで管理し、Claspなどのツールで同期する際に整合性が高くなります。

**タスク:**

1.  現在の `./src/main` と `./src/test` ディレクトリを削除してください。
2.  上記の「提案するディレクトリ構造」に従って、`./src` 直下にファイルを配置してください。最初は空のファイルで構いません。特に `appsscript.json` はGASプロジェクトの基本的な設定ファイルとして重要です。

**このステップが完了したら、Gitコミットとキャプチャを行い、次の指示を待つために作業を停止し、その旨を報告してください。**

### 3.2. テスト仕様書の作成（`./documents/テスト仕様書.md`）

`./documents/詳細設計.md` に基づき、各関数のテストケースを具体的に記述した**テスト仕様書**を作成してください。

**内容に含めるべき項目:**

  * テスト対象モジュール/関数名
  * テストケースID（例: TS-NS-001）
  * テスト目的
  * テスト手順（Given-When-Then 形式が望ましい）
  * 入力データ（モックデータを含む）
  * 期待される結果
  * 前提条件

**対象とするモジュール:**

  * `NamingService.gs` (最優先)
  * `GeminiApi.gs` (モック化を前提)
  * `Utils.gs` (必要に応じて)

**このステップが完了したら、Gitコミットとキャプチャを行い、次の指示を待つために作業を停止し、その旨を報告してください。**

### 3.3. テストコードの作成（`./src/tests/` ディレクトリ内）

作成したテスト仕様書（特に `NamingService` と `GeminiApi`）に従って、GASのQUnitベースのテストコードを記述してください。

**ポイント:**

  * GASのQUnitテストフレームワークを利用します。
  * `GeminiApi.gs` のテストでは、`UrlFetchApp` や `PropertiesService` などのGAS組み込みサービスを**モック化**し、実際のAPI呼び出しやプロパティの取得なしにテストが実行できるようにしてください。

**このステップが完了したら、Gitコミットとキャプチャを行い、次の指示を待つために作業を停止し、その旨を報告してください。**

### 3.4. 本体ソースコードの作成（`./src/` 直下）

テストコードがRED（失敗）になることを確認した後、そのテストをパスするように本体のソースコードを記述してください。

**対象とするファイル:**

  * `Code.gs`
  * `NamingService.gs`
  * `GeminiApi.gs`
  * `Utils.gs`
  * `index.html` (フロントエンドのHTML/JS/CSS)

**このステップが完了したら、Gitコミットとキャプチャを行い、次の指示を待つために作業を停止し、その旨を報告してください。**

### 3.5. テスト実施

本体コードを記述した後、再度テストを実行し、テストがGREEN（成功）になることを確認してください。

**このステップが完了したら、Gitコミットとキャプチャを行い、次の指示を待つために作業を停止し、その旨を報告してください。**

-----